{
  "version": 3,
  "sources": ["../../../src/room_do.ts", "../../../src/worker.ts", "../../../node_modules/wrangler/templates/middleware/middleware-ensure-req-body-drained.ts", "../../../node_modules/wrangler/templates/middleware/middleware-miniflare3-json-error.ts", "../bundle-5Utc6r/middleware-insertion-facade.js", "../../../node_modules/wrangler/templates/middleware/common.ts", "../bundle-5Utc6r/middleware-loader.entry.ts"],
  "sourceRoot": "/Users/finder/Downloads/po/.wrangler/tmp/dev-EVsJI0",
  "sourcesContent": ["type Suit = \"S\" | \"H\" | \"D\" | \"C\";\ntype Rank = 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 10 | 11 | 12 | 13 | 14; // 11=J, 12=Q, 13=K, 14=A\ntype Card = `${string}${Suit}`; // e.g. \"AS\", \"TD\"\n\ntype RoomConfig = {\n  code: string;\n  maxPlayers: number;\n  startingChips: number;\n  sb: number;\n  bb: number;\n  hostKey: string;\n};\n\ntype Player = {\n  id: string;\n  key: string; // reconnect token\n  nick: string;\n  seat: number;\n  chips: number;\n  ready: boolean;\n  connected: boolean;\n\n  // Per-hand state\n  inHand: boolean;\n  folded: boolean;\n  allIn: boolean;\n  hole: Card[]; // only sent to owner (or at showdown if revealed)\n  betThisRound: number;\n  committed: number; // total committed this hand\n};\n\ntype Phase = \"waiting\" | \"preflop\" | \"flop\" | \"turn\" | \"river\" | \"showdown\";\n\ntype GameState = {\n  handNumber: number;\n  phase: Phase;\n  dealerSeat: number | null;\n  sbSeat: number | null;\n  bbSeat: number | null;\n  turnSeat: number | null;\n\n  deck: Card[];\n  board: Card[];\n\n  pot: number;\n  currentBet: number;\n  minRaiseTo: number;\n  acted: Record<string, boolean>; // playerId -> acted this round\n\n  // For UI\n  lastEvent?: string;\n  lastShowdown?: {\n    board: Card[];\n    winners: Array<{ playerId: string; nick: string; amount: number }>;\n    revealed: Record<string, Card[]>;\n  };\n};\n\ntype ClientToServer =\n  | { type: \"ready\"; ready: boolean }\n  | { type: \"start_hand\" }\n  | { type: \"action\"; action: \"fold\" | \"check\" | \"call\" | \"raise\" | \"allin\"; raiseTo?: number };\n\ntype ServerToClient =\n  | { type: \"welcome\"; roomCode: string; playerId: string; playerKey: string; isHost: boolean; startingChips: number }\n  | { type: \"error\"; message: string }\n  | { type: \"state\"; state: unknown };\n\nfunction normalizeNick(nick: string): string {\n  const trimmed = nick.trim();\n  // Keep it permissive, but avoid weirdly long strings.\n  return trimmed.slice(0, 20);\n}\n\nfunction jsonResponse(data: unknown, status = 200): Response {\n  return new Response(JSON.stringify(data, null, 2), {\n    status,\n    headers: { \"content-type\": \"application/json; charset=utf-8\" },\n  });\n}\n\nfunction makeDeck(): Card[] {\n  const suits: Suit[] = [\"S\", \"H\", \"D\", \"C\"];\n  const ranks = [\"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"T\", \"J\", \"Q\", \"K\", \"A\"];\n  const deck: Card[] = [];\n  for (const r of ranks) for (const s of suits) deck.push(`${r}${s}` as Card);\n  return deck;\n}\n\nfunction shuffle<T>(arr: T[]): void {\n  for (let i = arr.length - 1; i > 0; i--) {\n    const b = new Uint32Array(1);\n    crypto.getRandomValues(b);\n    const j = b[0] % (i + 1);\n    [arr[i], arr[j]] = [arr[j], arr[i]];\n  }\n}\n\nfunction rankValue(card: Card): Rank {\n  const r = card[0];\n  if (r === \"A\") return 14;\n  if (r === \"K\") return 13;\n  if (r === \"Q\") return 12;\n  if (r === \"J\") return 11;\n  if (r === \"T\") return 10;\n  return Number(r) as Rank;\n}\n\nfunction suitValue(card: Card): Suit {\n  return card[1] as Suit;\n}\n\nfunction compareLex(a: number[], b: number[]): number {\n  for (let i = 0; i < Math.max(a.length, b.length); i++) {\n    const av = a[i] ?? 0;\n    const bv = b[i] ?? 0;\n    if (av !== bv) return av > bv ? 1 : -1;\n  }\n  return 0;\n}\n\n// Category: 8=straight flush, 7=quads, 6=full house, 5=flush, 4=straight, 3=trips, 2=two pair, 1=pair, 0=high card\ntype HandRank = { cat: number; tiebreak: number[] };\n\nfunction best5of7(cards7: Card[]): HandRank {\n  // brute force 21 combos\n  let best: HandRank | null = null;\n  for (let a = 0; a < 7; a++) {\n    for (let b = a + 1; b < 7; b++) {\n      for (let c = b + 1; c < 7; c++) {\n        for (let d = c + 1; d < 7; d++) {\n          for (let e = d + 1; e < 7; e++) {\n            const five = [cards7[a], cards7[b], cards7[c], cards7[d], cards7[e]];\n            const r = rank5(five);\n            if (!best) best = r;\n            else if (r.cat !== best.cat ? r.cat > best.cat : compareLex(r.tiebreak, best.tiebreak) > 0) best = r;\n          }\n        }\n      }\n    }\n  }\n  return best ?? { cat: 0, tiebreak: [0] };\n}\n\nfunction rank5(cards5: Card[]): HandRank {\n  const ranks = cards5.map(rankValue).sort((a, b) => b - a);\n  const suits = cards5.map(suitValue);\n  const isFlush = suits.every((s) => s === suits[0]);\n\n  // straight detection (including wheel A-5)\n  const uniq = Array.from(new Set(ranks)).sort((a, b) => b - a);\n  let isStraight = false;\n  let straightHigh = 0;\n  if (uniq.length === 5) {\n    if (uniq[0] - uniq[4] === 4) {\n      isStraight = true;\n      straightHigh = uniq[0];\n    } else if (uniq[0] === 14 && uniq[1] === 5 && uniq[2] === 4 && uniq[3] === 3 && uniq[4] === 2) {\n      isStraight = true;\n      straightHigh = 5;\n    }\n  }\n\n  const counts = new Map<number, number>();\n  for (const r of ranks) counts.set(r, (counts.get(r) ?? 0) + 1);\n  const groups = Array.from(counts.entries()).sort((a, b) => (b[1] - a[1]) || (b[0] - a[0])); // by count then rank\n  const pattern = groups.map(([, c]) => c).join(\",\");\n\n  if (isStraight && isFlush) return { cat: 8, tiebreak: [straightHigh] };\n  if (pattern === \"4,1\") {\n    const quad = groups[0][0];\n    const kicker = groups[1][0];\n    return { cat: 7, tiebreak: [quad, kicker] };\n  }\n  if (pattern === \"3,2\") {\n    const trips = groups[0][0];\n    const pair = groups[1][0];\n    return { cat: 6, tiebreak: [trips, pair] };\n  }\n  if (isFlush) return { cat: 5, tiebreak: ranks };\n  if (isStraight) return { cat: 4, tiebreak: [straightHigh] };\n  if (pattern === \"3,1,1\") {\n    const trips = groups[0][0];\n    const kickers = groups.slice(1).map(([r]) => r).sort((a, b) => b - a);\n    return { cat: 3, tiebreak: [trips, ...kickers] };\n  }\n  if (pattern === \"2,2,1\") {\n    const p1 = groups[0][0];\n    const p2 = groups[1][0];\n    const hi = Math.max(p1, p2);\n    const lo = Math.min(p1, p2);\n    const kicker = groups[2][0];\n    return { cat: 2, tiebreak: [hi, lo, kicker] };\n  }\n  if (pattern === \"2,1,1,1\") {\n    const pair = groups[0][0];\n    const kickers = groups.slice(1).map(([r]) => r).sort((a, b) => b - a);\n    return { cat: 1, tiebreak: [pair, ...kickers] };\n  }\n  return { cat: 0, tiebreak: ranks };\n}\n\nfunction nextSeatAfter(seat: number, seats: number[]): number {\n  const idx = seats.indexOf(seat);\n  if (idx === -1) return seats[0];\n  return seats[(idx + 1) % seats.length];\n}\n\nfunction firstOccupiedSeat(players: Player[]): number | null {\n  if (players.length === 0) return null;\n  return players.map((p) => p.seat).sort((a, b) => a - b)[0] ?? null;\n}\n\nexport class RoomDO implements DurableObject {\n  private state: DurableObjectState;\n  private config: RoomConfig | null = null;\n  private players: Player[] = [];\n  private game: GameState | null = null;\n\n  private sockets = new Map<string, WebSocket>(); // connId -> socket\n  private connPlayer = new Map<string, string>(); // connId -> playerId\n  private connIsHost = new Map<string, boolean>(); // connId -> isHost\n\n  constructor(state: DurableObjectState, _env: unknown) {\n    this.state = state;\n  }\n\n  private async load(): Promise<void> {\n    if (this.config && this.game) return;\n    const [cfg, pls, g] = await Promise.all([\n      this.state.storage.get<RoomConfig>(\"config\"),\n      this.state.storage.get<Player[]>(\"players\"),\n      this.state.storage.get<GameState>(\"game\"),\n    ]);\n    this.config = cfg ?? null;\n    this.players = pls ?? [];\n    this.game =\n      g ??\n      ({\n        handNumber: 0,\n        phase: \"waiting\",\n        dealerSeat: null,\n        sbSeat: null,\n        bbSeat: null,\n        turnSeat: null,\n        deck: [],\n        board: [],\n        pot: 0,\n        currentBet: 0,\n        minRaiseTo: 0,\n        acted: {},\n      } satisfies GameState);\n  }\n\n  private async persist(): Promise<void> {\n    await this.state.storage.put({\n      config: this.config,\n      players: this.players,\n      game: this.game,\n    });\n  }\n\n  private send(connId: string, msg: ServerToClient): void {\n    const ws = this.sockets.get(connId);\n    if (!ws) return;\n    ws.send(JSON.stringify(msg));\n  }\n\n  private broadcastState(): void {\n    if (!this.config || !this.game) return;\n    for (const [connId] of this.sockets) {\n      const playerId = this.connPlayer.get(connId) ?? null;\n      const isHost = this.connIsHost.get(connId) ?? false;\n      this.send(connId, { type: \"state\", state: this.viewFor(playerId, isHost) });\n    }\n  }\n\n  private viewFor(playerId: string | null, isHost: boolean): unknown {\n    if (!this.config || !this.game) return { ok: false };\n    const me = playerId ? this.players.find((p) => p.id === playerId) ?? null : null;\n\n    const players = this.players\n      .slice()\n      .sort((a, b) => a.seat - b.seat)\n      .map((p) => ({\n        id: p.id,\n        nick: p.nick,\n        seat: p.seat,\n        chips: p.chips,\n        ready: p.ready,\n        connected: p.connected,\n        inHand: p.inHand,\n        folded: p.folded,\n        allIn: p.allIn,\n        betThisRound: p.betThisRound,\n        committed: p.committed,\n        isDealer: this.game!.dealerSeat === p.seat,\n        isSB: this.game!.sbSeat === p.seat,\n        isBB: this.game!.bbSeat === p.seat,\n        isTurn: this.game!.turnSeat === p.seat,\n      }));\n\n    const revealed: Record<string, Card[]> = {};\n    if (this.game.lastShowdown?.revealed) Object.assign(revealed, this.game.lastShowdown.revealed);\n\n    return {\n      ok: true,\n      room: {\n        code: this.config.code,\n        maxPlayers: this.config.maxPlayers,\n        startingChips: this.config.startingChips,\n        sb: this.config.sb,\n        bb: this.config.bb,\n      },\n      you: me\n        ? {\n            id: me.id,\n            nick: me.nick,\n            seat: me.seat,\n            chips: me.chips,\n            ready: me.ready,\n            connected: me.connected,\n            inHand: me.inHand,\n            folded: me.folded,\n            allIn: me.allIn,\n            betThisRound: me.betThisRound,\n            committed: me.committed,\n            hole: me.hole,\n          }\n        : null,\n      isHost,\n      players,\n      game: {\n        handNumber: this.game.handNumber,\n        phase: this.game.phase,\n        dealerSeat: this.game.dealerSeat,\n        sbSeat: this.game.sbSeat,\n        bbSeat: this.game.bbSeat,\n        turnSeat: this.game.turnSeat,\n        board: this.game.board,\n        pot: this.game.pot,\n        currentBet: this.game.currentBet,\n        minRaiseTo: this.game.minRaiseTo,\n        lastEvent: this.game.lastEvent ?? null,\n        lastShowdown: this.game.lastShowdown ?? null,\n        revealed,\n      },\n    };\n  }\n\n  private error(connId: string, message: string): void {\n    this.send(connId, { type: \"error\", message });\n  }\n\n  private seatsTaken(): Set<number> {\n    return new Set(this.players.map((p) => p.seat));\n  }\n\n  private allocSeat(): number | null {\n    if (!this.config) return null;\n    const taken = this.seatsTaken();\n    for (let s = 1; s <= this.config.maxPlayers; s++) if (!taken.has(s)) return s;\n    return null;\n  }\n\n  private activeInHandPlayers(): Player[] {\n    return this.players.filter((p) => p.inHand && !p.folded);\n  }\n\n  private eligibleToActPlayers(): Player[] {\n    return this.players.filter((p) => p.inHand && !p.folded && !p.allIn);\n  }\n\n  private seatsInHandSorted(): number[] {\n    return this.players\n      .filter((p) => p.inHand && !p.folded)\n      .map((p) => p.seat)\n      .sort((a, b) => a - b);\n  }\n\n  private seatToPlayer(seat: number): Player | null {\n    return this.players.find((p) => p.seat === seat) ?? null;\n  }\n\n  private nextToActFrom(seat: number): number | null {\n    const seats = this.seatsInHandSorted();\n    if (seats.length === 0) return null;\n    let cur = seat;\n    for (let i = 0; i < seats.length; i++) {\n      cur = nextSeatAfter(cur, seats);\n      const p = this.seatToPlayer(cur);\n      if (!p) continue;\n      if (p.inHand && !p.folded && !p.allIn) return cur;\n    }\n    return null;\n  }\n\n  private firstToActPreflop(): number | null {\n    if (!this.game || !this.game.bbSeat || !this.game.dealerSeat) return null;\n    const activeSeats = this.seatsInHandSorted();\n    if (activeSeats.length === 2) {\n      // Heads-up: dealer is SB and acts first preflop.\n      return this.game.dealerSeat;\n    }\n    return this.nextToActFrom(this.game.bbSeat) ?? null;\n  }\n\n  private firstToActPostflop(): number | null {\n    if (!this.game || !this.game.dealerSeat || !this.game.bbSeat) return null;\n    const activeSeats = this.seatsInHandSorted();\n    if (activeSeats.length === 2) {\n      // Heads-up: BB acts first postflop.\n      return this.game.bbSeat;\n    }\n    // First seat after dealer.\n    return this.nextToActFrom(this.game.dealerSeat) ?? null;\n  }\n\n  private startHand(): void {\n    if (!this.config || !this.game) return;\n    const ready = this.players.filter((p) => p.ready && p.chips > 0);\n    if (ready.length < 2) {\n      this.game.lastEvent = \"Need at least 2 ready players with chips.\";\n      return;\n    }\n\n    // Mark per-hand state\n    for (const p of this.players) {\n      const inHand = p.ready && p.chips > 0;\n      p.inHand = inHand;\n      p.folded = false;\n      p.allIn = false;\n      p.hole = [];\n      p.betThisRound = 0;\n      p.committed = 0;\n    }\n\n    const seats = this.players\n      .filter((p) => p.inHand)\n      .map((p) => p.seat)\n      .sort((a, b) => a - b);\n\n    if (seats.length < 2) {\n      this.game.lastEvent = \"Need at least 2 ready players.\";\n      return;\n    }\n\n    // Advance dealer\n    if (this.game.dealerSeat == null) {\n      this.game.dealerSeat = firstOccupiedSeat(this.players.filter((p) => p.inHand));\n    } else {\n      this.game.dealerSeat = nextSeatAfter(this.game.dealerSeat, seats);\n    }\n\n    // SB/BB\n    const dealer = this.game.dealerSeat!;\n    const sbSeat = nextSeatAfter(dealer, seats);\n    const bbSeat = nextSeatAfter(sbSeat, seats);\n    this.game.sbSeat = sbSeat;\n    this.game.bbSeat = bbSeat;\n\n    // Fresh deck\n    const deck = makeDeck();\n    shuffle(deck);\n    this.game.deck = deck;\n    this.game.board = [];\n    this.game.pot = 0;\n    this.game.currentBet = 0;\n    this.game.minRaiseTo = this.config.bb;\n    this.game.acted = {};\n    this.game.lastShowdown = undefined;\n\n    // Deal hole cards (2 each)\n    for (let i = 0; i < 2; i++) {\n      for (const seat of seats) {\n        const p = this.seatToPlayer(seat)!;\n        p.hole.push(this.game.deck.pop()!);\n      }\n    }\n\n    // Post blinds\n    const sbP = this.seatToPlayer(sbSeat)!;\n    const bbP = this.seatToPlayer(bbSeat)!;\n    const sbAmt = Math.min(sbP.chips, this.config.sb);\n    const bbAmt = Math.min(bbP.chips, this.config.bb);\n\n    sbP.chips -= sbAmt;\n    sbP.betThisRound += sbAmt;\n    sbP.committed += sbAmt;\n    if (sbP.chips === 0) sbP.allIn = true;\n\n    bbP.chips -= bbAmt;\n    bbP.betThisRound += bbAmt;\n    bbP.committed += bbAmt;\n    if (bbP.chips === 0) bbP.allIn = true;\n\n    this.game.pot = sbAmt + bbAmt;\n    this.game.currentBet = Math.max(sbP.betThisRound, bbP.betThisRound);\n    this.game.minRaiseTo = this.game.currentBet + this.config.bb;\n    this.game.phase = \"preflop\";\n    this.game.handNumber += 1;\n    this.game.lastEvent = `Hand #${this.game.handNumber} started. Blinds posted.`;\n\n    // Who acts first\n    this.game.turnSeat = this.firstToActPreflop();\n    if (!this.game.turnSeat) this.fastForwardIfAllIn();\n  }\n\n  private onlyOneLeft(): Player | null {\n    const alive = this.players.filter((p) => p.inHand && !p.folded);\n    return alive.length === 1 ? alive[0] : null;\n  }\n\n  private finishHandSingleWinner(winner: Player, reason: string): void {\n    if (!this.game) return;\n    const winAmt = this.game.pot;\n    winner.chips += winAmt;\n    this.game.lastEvent = `${winner.nick} wins ${winAmt} (${reason}).`;\n    this.game.lastShowdown = {\n      board: this.game.board,\n      winners: [{ playerId: winner.id, nick: winner.nick, amount: winAmt }],\n      revealed: {},\n    };\n    this.game.phase = \"waiting\";\n    this.game.turnSeat = null;\n  }\n\n  private resetStreetForNext(phase: Phase): void {\n    if (!this.game || !this.config) return;\n    for (const p of this.players) if (p.inHand && !p.folded) p.betThisRound = 0;\n    this.game.currentBet = 0;\n    this.game.minRaiseTo = this.config.bb;\n    this.game.acted = {};\n    this.game.phase = phase;\n    this.game.turnSeat = this.firstToActPostflop();\n    if (!this.game.turnSeat) this.fastForwardIfAllIn();\n  }\n\n  private maybeAdvanceRound(): void {\n    if (!this.game) return;\n\n    const sole = this.onlyOneLeft();\n    if (sole) {\n      this.finishHandSingleWinner(sole, \"everyone else folded\");\n      return;\n    }\n\n    if (this.game.phase === \"waiting\" || this.game.phase === \"showdown\") return;\n\n    const elig = this.eligibleToActPlayers();\n    for (const p of elig) {\n      if (!this.game.acted[p.id]) return;\n      if (p.betThisRound !== this.game.currentBet) return;\n    }\n\n    // Betting round complete\n    if (this.game.phase === \"preflop\") {\n      this.game.board.push(this.game.deck.pop()!, this.game.deck.pop()!, this.game.deck.pop()!);\n      this.game.lastEvent = \"Flop dealt.\";\n      this.resetStreetForNext(\"flop\");\n      return;\n    }\n    if (this.game.phase === \"flop\") {\n      this.game.board.push(this.game.deck.pop()!);\n      this.game.lastEvent = \"Turn dealt.\";\n      this.resetStreetForNext(\"turn\");\n      return;\n    }\n    if (this.game.phase === \"turn\") {\n      this.game.board.push(this.game.deck.pop()!);\n      this.game.lastEvent = \"River dealt.\";\n      this.resetStreetForNext(\"river\");\n      return;\n    }\n    if (this.game.phase === \"river\") {\n      this.game.lastEvent = \"Showdown.\";\n      this.doShowdown();\n      return;\n    }\n  }\n\n  private doShowdown(): void {\n    if (!this.game) return;\n    const inShowdown = this.players.filter((p) => p.inHand && !p.folded);\n    const revealed: Record<string, Card[]> = {};\n    for (const p of inShowdown) revealed[p.id] = p.hole.slice();\n\n    // Side pots based on committed amounts for *all* players (including folded), but eligibility excludes folded.\n    const contributors = this.players.filter((p) => p.inHand && p.committed > 0);\n    const tiers = Array.from(new Set(contributors.map((p) => p.committed))).sort((a, b) => a - b);\n\n    const payouts = new Map<string, number>();\n    let prev = 0;\n\n    for (const tier of tiers) {\n      const involved = contributors.filter((p) => p.committed >= tier);\n      const potSize = (tier - prev) * involved.length;\n      prev = tier;\n\n      const eligible = involved.filter((p) => !p.folded);\n      if (eligible.length === 0) continue;\n\n      // Determine winners for this pot.\n      let best: HandRank | null = null;\n      let winners: Player[] = [];\n      for (const p of eligible) {\n        const rank = best5of7([...p.hole, ...this.game.board]);\n        if (!best) {\n          best = rank;\n          winners = [p];\n          continue;\n        }\n        const cmp = rank.cat !== best.cat ? (rank.cat > best.cat ? 1 : -1) : compareLex(rank.tiebreak, best.tiebreak);\n        if (cmp > 0) {\n          best = rank;\n          winners = [p];\n        } else if (cmp === 0) {\n          winners.push(p);\n        }\n      }\n\n      const share = Math.floor(potSize / winners.length);\n      let remainder = potSize - share * winners.length;\n      const bySeat = winners.slice().sort((a, b) => a.seat - b.seat);\n      for (const w of bySeat) {\n        let amt = share;\n        if (remainder > 0) {\n          amt += 1;\n          remainder -= 1;\n        }\n        payouts.set(w.id, (payouts.get(w.id) ?? 0) + amt);\n      }\n    }\n\n    const winnersOut: Array<{ playerId: string; nick: string; amount: number }> = [];\n    for (const [pid, amt] of payouts) {\n      const p = this.players.find((x) => x.id === pid);\n      if (!p) continue;\n      p.chips += amt;\n      winnersOut.push({ playerId: pid, nick: p.nick, amount: amt });\n    }\n\n    this.game.lastShowdown = { board: this.game.board.slice(), winners: winnersOut, revealed };\n    this.game.phase = \"waiting\";\n    this.game.turnSeat = null;\n  }\n\n  private currentPlayer(): Player | null {\n    if (!this.game?.turnSeat) return null;\n    return this.seatToPlayer(this.game.turnSeat);\n  }\n\n  private applyAction(playerId: string, msg: Extract<ClientToServer, { type: \"action\" }>): string | null {\n    if (!this.config || !this.game) return \"Room not initialized\";\n    if (this.game.phase === \"waiting\" || this.game.phase === \"showdown\") return \"No active hand\";\n\n    const actor = this.players.find((p) => p.id === playerId);\n    if (!actor) return \"Unknown player\";\n    if (!actor.inHand || actor.folded) return \"Not in hand\";\n    if (actor.allIn) return \"You are all-in\";\n    if (this.game.turnSeat !== actor.seat) return \"Not your turn\";\n\n    const toCall = Math.max(0, this.game.currentBet - actor.betThisRound);\n\n    const act = msg.action;\n    if (act === \"fold\") {\n      actor.folded = true;\n      this.game.acted[actor.id] = true;\n      this.game.lastEvent = `${actor.nick} folds.`;\n    } else if (act === \"check\") {\n      if (toCall !== 0) return \"Cannot check (need to call)\";\n      this.game.acted[actor.id] = true;\n      this.game.lastEvent = `${actor.nick} checks.`;\n    } else if (act === \"call\") {\n      const pay = Math.min(actor.chips, toCall);\n      actor.chips -= pay;\n      actor.betThisRound += pay;\n      actor.committed += pay;\n      this.game.pot += pay;\n      if (actor.chips === 0) actor.allIn = true;\n      this.game.acted[actor.id] = true;\n      this.game.lastEvent = `${actor.nick} calls ${pay}.`;\n    } else if (act === \"allin\") {\n      const pay = actor.chips;\n      if (pay <= 0) return \"No chips\";\n      actor.chips = 0;\n      actor.betThisRound += pay;\n      actor.committed += pay;\n      this.game.pot += pay;\n      actor.allIn = true;\n      if (actor.betThisRound > this.game.currentBet) {\n        this.game.currentBet = actor.betThisRound;\n        this.game.minRaiseTo = this.game.currentBet + this.config.bb;\n        this.game.acted = {};\n      }\n      this.game.acted[actor.id] = true;\n      this.game.lastEvent = `${actor.nick} goes all-in (${pay}).`;\n    } else if (act === \"raise\") {\n      const raiseTo = Math.trunc(msg.raiseTo ?? 0);\n      if (!(raiseTo > this.game.currentBet)) return \"raiseTo must be > currentBet\";\n      if (raiseTo < this.game.minRaiseTo) return `Min raiseTo is ${this.game.minRaiseTo}`;\n      const needed = raiseTo - actor.betThisRound;\n      if (needed <= 0) return \"Invalid raise\";\n      if (needed > actor.chips) return \"Not enough chips (use all-in)\";\n\n      actor.chips -= needed;\n      actor.betThisRound += needed;\n      actor.committed += needed;\n      this.game.pot += needed;\n\n      this.game.currentBet = raiseTo;\n      this.game.minRaiseTo = raiseTo + this.config.bb;\n      this.game.acted = {}; // new betting \"cycle\"\n      this.game.acted[actor.id] = true;\n      this.game.lastEvent = `${actor.nick} raises to ${raiseTo}.`;\n    } else {\n      return \"Unknown action\";\n    }\n\n    // Next turn (or end)\n    const sole = this.onlyOneLeft();\n    if (sole) {\n      this.finishHandSingleWinner(sole, \"everyone else folded\");\n      return null;\n    }\n\n    const next = this.nextToActFrom(actor.seat);\n    this.game.turnSeat = next;\n\n    // If nobody can act (everyone all-in), fast-forward streets to showdown.\n    if (!this.game.turnSeat) {\n      this.fastForwardIfAllIn();\n      return null;\n    }\n\n    this.maybeAdvanceRound();\n    return null;\n  }\n\n  private fastForwardIfAllIn(): void {\n    if (!this.game) return;\n    if (this.eligibleToActPlayers().length !== 0) return;\n    if (this.onlyOneLeft()) return;\n\n    // Deal remaining streets to 5 board cards.\n    while (this.game.board.length < 5) this.game.board.push(this.game.deck.pop()!);\n    this.game.lastEvent = \"All-in. Dealing out the board.\";\n    this.doShowdown();\n  }\n\n  async fetch(request: Request): Promise<Response> {\n    await this.load();\n    const url = new URL(request.url);\n\n    if (url.pathname.endsWith(\"/init\") && request.method === \"POST\") {\n      if (this.config) return jsonResponse({ ok: false, error: \"Already initialized\" }, 409);\n      const body = (await request.json()) as Partial<RoomConfig>;\n      if (!body.code || !body.hostKey) return jsonResponse({ ok: false, error: \"Missing fields\" }, 400);\n      this.config = {\n        code: String(body.code).toUpperCase(),\n        maxPlayers: Number(body.maxPlayers ?? 8),\n        startingChips: Number(body.startingChips ?? 10_000),\n        sb: Number(body.sb ?? 50),\n        bb: Number(body.bb ?? 100),\n        hostKey: String(body.hostKey),\n      };\n      await this.persist();\n      return jsonResponse({ ok: true });\n    }\n\n    if (url.pathname.endsWith(\"/ws\")) {\n      if (request.headers.get(\"Upgrade\") !== \"websocket\") return new Response(\"Expected websocket\", { status: 426 });\n      if (!this.config) return new Response(\"Room not initialized\", { status: 404 });\n\n      const nickRaw = url.searchParams.get(\"nick\") ?? \"\";\n      const nick = normalizeNick(nickRaw);\n      if (!nick) return new Response(\"Missing nick\", { status: 400 });\n\n      const providedKey = url.searchParams.get(\"playerKey\") ?? \"\";\n      const providedHostKey = url.searchParams.get(\"hostKey\") ?? \"\";\n      const isHost = providedHostKey && providedHostKey === this.config.hostKey;\n\n      const pair = new WebSocketPair();\n      const [client, server] = Object.values(pair) as [WebSocket, WebSocket];\n      server.accept();\n      const connId = crypto.randomUUID();\n      this.sockets.set(connId, server);\n      this.connIsHost.set(connId, isHost);\n\n      let player: Player | null = null;\n      if (providedKey) {\n        player = this.players.find((p) => p.key === providedKey) ?? null;\n      }\n      if (!player) {\n        if (this.players.some((p) => p.nick.toLowerCase() === nick.toLowerCase())) {\n          server.send(JSON.stringify({ type: \"error\", message: \"Nick already taken in this room.\" } satisfies ServerToClient));\n          server.close(1008, \"Nick taken\");\n          return new Response(null, { status: 101, webSocket: client });\n        }\n        const seat = this.allocSeat();\n        if (!seat) {\n          server.send(JSON.stringify({ type: \"error\", message: \"Room is full.\" } satisfies ServerToClient));\n          server.close(1008, \"Room full\");\n          return new Response(null, { status: 101, webSocket: client });\n        }\n        player = {\n          id: crypto.randomUUID(),\n          key: crypto.randomUUID(),\n          nick,\n          seat,\n          chips: this.config.startingChips,\n          ready: false,\n          connected: true,\n          inHand: false,\n          folded: false,\n          allIn: false,\n          hole: [],\n          betThisRound: 0,\n          committed: 0,\n        };\n        this.players.push(player);\n      } else {\n        player.connected = true;\n        // If they rejoined with same key but a different nick input, keep stored nick.\n      }\n\n      this.connPlayer.set(connId, player.id);\n      await this.persist();\n\n      server.send(\n        JSON.stringify({\n          type: \"welcome\",\n          roomCode: this.config.code,\n          playerId: player.id,\n          playerKey: player.key,\n          isHost,\n          startingChips: this.config.startingChips,\n        } satisfies ServerToClient),\n      );\n\n      this.broadcastState();\n\n      server.addEventListener(\"message\", async (ev) => {\n        const pid = this.connPlayer.get(connId);\n        if (!pid) return;\n        let data: ClientToServer;\n        try {\n          data = JSON.parse(String(ev.data)) as ClientToServer;\n        } catch {\n          this.error(connId, \"Bad JSON\");\n          return;\n        }\n\n        await this.load();\n\n        if (data.type === \"ready\") {\n          const p = this.players.find((x) => x.id === pid);\n          if (!p) return;\n          p.ready = Boolean(data.ready);\n          if (!p.ready && this.game?.phase !== \"waiting\") {\n            // Don't allow toggling out mid-hand; keep them in but mark not ready for next hand.\n            p.ready = false;\n          }\n          this.game!.lastEvent = `${p.nick} is ${p.ready ? \"ready\" : \"not ready\"}.`;\n          await this.persist();\n          this.broadcastState();\n          return;\n        }\n\n        if (data.type === \"start_hand\") {\n          const host = this.connIsHost.get(connId) ?? false;\n          if (!host) {\n            this.error(connId, \"Host only\");\n            return;\n          }\n          if (this.game!.phase !== \"waiting\") {\n            this.error(connId, \"Hand already running\");\n            return;\n          }\n          this.startHand();\n          await this.persist();\n          this.broadcastState();\n          return;\n        }\n\n        if (data.type === \"action\") {\n          const err = this.applyAction(pid, data);\n          if (err) this.error(connId, err);\n          await this.persist();\n          this.broadcastState();\n          return;\n        }\n      });\n\n      server.addEventListener(\"close\", async () => {\n        this.sockets.delete(connId);\n        this.connIsHost.delete(connId);\n        const pid = this.connPlayer.get(connId);\n        this.connPlayer.delete(connId);\n        if (pid) {\n          const p = this.players.find((x) => x.id === pid);\n          if (p) p.connected = false;\n          await this.persist();\n          this.broadcastState();\n        }\n      });\n\n      return new Response(null, { status: 101, webSocket: client });\n    }\n\n    if (url.pathname.endsWith(\"/debug\") && request.method === \"GET\") {\n      return jsonResponse({ ok: true, config: this.config, players: this.players, game: this.game });\n    }\n\n    return new Response(\"Not found\", { status: 404 });\n  }\n}\n", "import { RoomDO } from \"./room_do\";\n\nexport { RoomDO };\n\ntype CreateRoomRequest = {\n  maxPlayers?: number;\n  sb?: number;\n  bb?: number;\n};\n\ntype Env = {\n  ROOMS: DurableObjectNamespace<RoomDO>;\n  ASSETS?: Fetcher;\n};\n\nfunction json(data: unknown, init: ResponseInit = {}): Response {\n  const headers = new Headers(init.headers);\n  if (!headers.has(\"content-type\")) headers.set(\"content-type\", \"application/json; charset=utf-8\");\n  return new Response(JSON.stringify(data, null, 2), { ...init, headers });\n}\n\nfunction badRequest(message: string, extra?: Record<string, unknown>): Response {\n  return json({ ok: false, error: message, ...(extra ?? {}) }, { status: 400 });\n}\n\nfunction generateCode(len = 5): string {\n  const alphabet = \"ABCDEFGHJKLMNPQRSTUVWXYZ23456789\"; // no I/O/0/1\n  const bytes = new Uint8Array(len);\n  crypto.getRandomValues(bytes);\n  let out = \"\";\n  for (let i = 0; i < len; i++) out += alphabet[bytes[i] % alphabet.length];\n  return out;\n}\n\nexport default {\n  async fetch(request: Request, env: Env): Promise<Response> {\n    const url = new URL(request.url);\n\n    if (url.pathname === \"/api/health\") {\n      return json({ ok: true });\n    }\n\n    if (url.pathname === \"/api/create\" && request.method === \"POST\") {\n      let body: CreateRoomRequest;\n      try {\n        body = (await request.json()) as CreateRoomRequest;\n      } catch {\n        return badRequest(\"Invalid JSON\");\n      }\n\n      const maxPlayers = Math.trunc(body.maxPlayers ?? 8);\n      const sb = Math.trunc(body.sb ?? 50);\n      const bb = Math.trunc(body.bb ?? 100);\n      const startingChips = 10_000;\n\n      if (!(maxPlayers >= 2 && maxPlayers <= 8)) return badRequest(\"maxPlayers must be 2..8\");\n      if (!(sb >= 1 && bb >= 2 && bb > sb)) return badRequest(\"blinds must satisfy 1 <= sb < bb\");\n      if (startingChips < bb * 10) return badRequest(\"startingChips too low for blinds\");\n\n      // Retry a couple times in case of collisions.\n      for (let attempt = 0; attempt < 5; attempt++) {\n        const code = generateCode(5);\n        const hostKey = crypto.randomUUID();\n        const id = env.ROOMS.idFromName(code);\n        const stub = env.ROOMS.get(id);\n\n        const initResp = await stub.fetch(\"https://room/init\", {\n          method: \"POST\",\n          headers: { \"content-type\": \"application/json\" },\n          body: JSON.stringify({ code, maxPlayers, startingChips, sb, bb, hostKey }),\n        });\n\n        if (initResp.status === 409) continue; // collision / already initialized\n        if (!initResp.ok) {\n          const text = await initResp.text();\n          return json({ ok: false, error: \"Room init failed\", details: text }, { status: 500 });\n        }\n\n        return json({ ok: true, code, hostKey, maxPlayers, startingChips, sb, bb });\n      }\n\n      return json({ ok: false, error: \"Failed to allocate room code. Retry.\" }, { status: 500 });\n    }\n\n    if (url.pathname.startsWith(\"/api/room/\")) {\n      const parts = url.pathname.split(\"/\").filter(Boolean); // [\"api\",\"room\",\":code\",\"...\"]\n      const code = (parts[2] ?? \"\").toUpperCase();\n      if (!code) return badRequest(\"Missing room code\");\n\n      const id = env.ROOMS.idFromName(code);\n      const stub = env.ROOMS.get(id);\n\n      // Forward the request to the room durable object.\n      return stub.fetch(request);\n    }\n\n    // Static assets (index.html, room.html, etc.)\n    if (env.ASSETS) return env.ASSETS.fetch(request);\n    return new Response(\"Not found\", { status: 404 });\n  },\n};\n", "import type { Middleware } from \"./common\";\n\nconst drainBody: Middleware = async (request, env, _ctx, middlewareCtx) => {\n\ttry {\n\t\treturn await middlewareCtx.next(request, env);\n\t} finally {\n\t\ttry {\n\t\t\tif (request.body !== null && !request.bodyUsed) {\n\t\t\t\tconst reader = request.body.getReader();\n\t\t\t\twhile (!(await reader.read()).done) {}\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tconsole.error(\"Failed to drain the unused request body.\", e);\n\t\t}\n\t}\n};\n\nexport default drainBody;\n", "import type { Middleware } from \"./common\";\n\ninterface JsonError {\n\tmessage?: string;\n\tname?: string;\n\tstack?: string;\n\tcause?: JsonError;\n}\n\nfunction reduceError(e: any): JsonError {\n\treturn {\n\t\tname: e?.name,\n\t\tmessage: e?.message ?? String(e),\n\t\tstack: e?.stack,\n\t\tcause: e?.cause === undefined ? undefined : reduceError(e.cause),\n\t};\n}\n\n// See comment in `bundle.ts` for details on why this is needed\nconst jsonError: Middleware = async (request, env, _ctx, middlewareCtx) => {\n\ttry {\n\t\treturn await middlewareCtx.next(request, env);\n\t} catch (e: any) {\n\t\tconst error = reduceError(e);\n\t\treturn Response.json(error, {\n\t\t\tstatus: 500,\n\t\t\theaders: { \"MF-Experimental-Error-Stack\": \"true\" },\n\t\t});\n\t}\n};\n\nexport default jsonError;\n", "\t\t\t\timport worker, * as OTHER_EXPORTS from \"/Users/finder/Downloads/po/src/worker.ts\";\n\t\t\t\timport * as __MIDDLEWARE_0__ from \"/Users/finder/Downloads/po/node_modules/wrangler/templates/middleware/middleware-ensure-req-body-drained.ts\";\nimport * as __MIDDLEWARE_1__ from \"/Users/finder/Downloads/po/node_modules/wrangler/templates/middleware/middleware-miniflare3-json-error.ts\";\n\n\t\t\t\texport * from \"/Users/finder/Downloads/po/src/worker.ts\";\n\t\t\t\tconst MIDDLEWARE_TEST_INJECT = \"__INJECT_FOR_TESTING_WRANGLER_MIDDLEWARE__\";\n\t\t\t\texport const __INTERNAL_WRANGLER_MIDDLEWARE__ = [\n\t\t\t\t\t\n\t\t\t\t\t__MIDDLEWARE_0__.default,__MIDDLEWARE_1__.default\n\t\t\t\t]\n\t\t\t\texport default worker;", "export type Awaitable<T> = T | Promise<T>;\n// TODO: allow dispatching more events?\nexport type Dispatcher = (\n\ttype: \"scheduled\",\n\tinit: { cron?: string }\n) => Awaitable<void>;\n\nexport type IncomingRequest = Request<\n\tunknown,\n\tIncomingRequestCfProperties<unknown>\n>;\n\nexport interface MiddlewareContext {\n\tdispatch: Dispatcher;\n\tnext(request: IncomingRequest, env: any): Awaitable<Response>;\n}\n\nexport type Middleware = (\n\trequest: IncomingRequest,\n\tenv: any,\n\tctx: ExecutionContext,\n\tmiddlewareCtx: MiddlewareContext\n) => Awaitable<Response>;\n\nconst __facade_middleware__: Middleware[] = [];\n\n// The register functions allow for the insertion of one or many middleware,\n// We register internal middleware first in the stack, but have no way of controlling\n// the order that addMiddleware is run in service workers so need an internal function.\nexport function __facade_register__(...args: (Middleware | Middleware[])[]) {\n\t__facade_middleware__.push(...args.flat());\n}\nexport function __facade_registerInternal__(\n\t...args: (Middleware | Middleware[])[]\n) {\n\t__facade_middleware__.unshift(...args.flat());\n}\n\nfunction __facade_invokeChain__(\n\trequest: IncomingRequest,\n\tenv: any,\n\tctx: ExecutionContext,\n\tdispatch: Dispatcher,\n\tmiddlewareChain: Middleware[]\n): Awaitable<Response> {\n\tconst [head, ...tail] = middlewareChain;\n\tconst middlewareCtx: MiddlewareContext = {\n\t\tdispatch,\n\t\tnext(newRequest, newEnv) {\n\t\t\treturn __facade_invokeChain__(newRequest, newEnv, ctx, dispatch, tail);\n\t\t},\n\t};\n\treturn head(request, env, ctx, middlewareCtx);\n}\n\nexport function __facade_invoke__(\n\trequest: IncomingRequest,\n\tenv: any,\n\tctx: ExecutionContext,\n\tdispatch: Dispatcher,\n\tfinalMiddleware: Middleware\n): Awaitable<Response> {\n\treturn __facade_invokeChain__(request, env, ctx, dispatch, [\n\t\t...__facade_middleware__,\n\t\tfinalMiddleware,\n\t]);\n}\n", "// This loads all middlewares exposed on the middleware object and then starts\n// the invocation chain. The big idea is that we can add these to the middleware\n// export dynamically through wrangler, or we can potentially let users directly\n// add them as a sort of \"plugin\" system.\n\nimport ENTRY, { __INTERNAL_WRANGLER_MIDDLEWARE__ } from \"/Users/finder/Downloads/po/.wrangler/tmp/bundle-5Utc6r/middleware-insertion-facade.js\";\nimport { __facade_invoke__, __facade_register__, Dispatcher } from \"/Users/finder/Downloads/po/node_modules/wrangler/templates/middleware/common.ts\";\nimport type { WorkerEntrypointConstructor } from \"/Users/finder/Downloads/po/.wrangler/tmp/bundle-5Utc6r/middleware-insertion-facade.js\";\n\n// Preserve all the exports from the worker\nexport * from \"/Users/finder/Downloads/po/.wrangler/tmp/bundle-5Utc6r/middleware-insertion-facade.js\";\n\nclass __Facade_ScheduledController__ implements ScheduledController {\n\treadonly #noRetry: ScheduledController[\"noRetry\"];\n\n\tconstructor(\n\t\treadonly scheduledTime: number,\n\t\treadonly cron: string,\n\t\tnoRetry: ScheduledController[\"noRetry\"]\n\t) {\n\t\tthis.#noRetry = noRetry;\n\t}\n\n\tnoRetry() {\n\t\tif (!(this instanceof __Facade_ScheduledController__)) {\n\t\t\tthrow new TypeError(\"Illegal invocation\");\n\t\t}\n\t\t// Need to call native method immediately in case uncaught error thrown\n\t\tthis.#noRetry();\n\t}\n}\n\nfunction wrapExportedHandler(worker: ExportedHandler): ExportedHandler {\n\t// If we don't have any middleware defined, just return the handler as is\n\tif (\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__ === undefined ||\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__.length === 0\n\t) {\n\t\treturn worker;\n\t}\n\t// Otherwise, register all middleware once\n\tfor (const middleware of __INTERNAL_WRANGLER_MIDDLEWARE__) {\n\t\t__facade_register__(middleware);\n\t}\n\n\tconst fetchDispatcher: ExportedHandlerFetchHandler = function (\n\t\trequest,\n\t\tenv,\n\t\tctx\n\t) {\n\t\tif (worker.fetch === undefined) {\n\t\t\tthrow new Error(\"Handler does not export a fetch() function.\");\n\t\t}\n\t\treturn worker.fetch(request, env, ctx);\n\t};\n\n\treturn {\n\t\t...worker,\n\t\tfetch(request, env, ctx) {\n\t\t\tconst dispatcher: Dispatcher = function (type, init) {\n\t\t\t\tif (type === \"scheduled\" && worker.scheduled !== undefined) {\n\t\t\t\t\tconst controller = new __Facade_ScheduledController__(\n\t\t\t\t\t\tDate.now(),\n\t\t\t\t\t\tinit.cron ?? \"\",\n\t\t\t\t\t\t() => {}\n\t\t\t\t\t);\n\t\t\t\t\treturn worker.scheduled(controller, env, ctx);\n\t\t\t\t}\n\t\t\t};\n\t\t\treturn __facade_invoke__(request, env, ctx, dispatcher, fetchDispatcher);\n\t\t},\n\t};\n}\n\nfunction wrapWorkerEntrypoint(\n\tklass: WorkerEntrypointConstructor\n): WorkerEntrypointConstructor {\n\t// If we don't have any middleware defined, just return the handler as is\n\tif (\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__ === undefined ||\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__.length === 0\n\t) {\n\t\treturn klass;\n\t}\n\t// Otherwise, register all middleware once\n\tfor (const middleware of __INTERNAL_WRANGLER_MIDDLEWARE__) {\n\t\t__facade_register__(middleware);\n\t}\n\n\t// `extend`ing `klass` here so other RPC methods remain callable\n\treturn class extends klass {\n\t\t#fetchDispatcher: ExportedHandlerFetchHandler<Record<string, unknown>> = (\n\t\t\trequest,\n\t\t\tenv,\n\t\t\tctx\n\t\t) => {\n\t\t\tthis.env = env;\n\t\t\tthis.ctx = ctx;\n\t\t\tif (super.fetch === undefined) {\n\t\t\t\tthrow new Error(\"Entrypoint class does not define a fetch() function.\");\n\t\t\t}\n\t\t\treturn super.fetch(request);\n\t\t};\n\n\t\t#dispatcher: Dispatcher = (type, init) => {\n\t\t\tif (type === \"scheduled\" && super.scheduled !== undefined) {\n\t\t\t\tconst controller = new __Facade_ScheduledController__(\n\t\t\t\t\tDate.now(),\n\t\t\t\t\tinit.cron ?? \"\",\n\t\t\t\t\t() => {}\n\t\t\t\t);\n\t\t\t\treturn super.scheduled(controller);\n\t\t\t}\n\t\t};\n\n\t\tfetch(request: Request<unknown, IncomingRequestCfProperties>) {\n\t\t\treturn __facade_invoke__(\n\t\t\t\trequest,\n\t\t\t\tthis.env,\n\t\t\t\tthis.ctx,\n\t\t\t\tthis.#dispatcher,\n\t\t\t\tthis.#fetchDispatcher\n\t\t\t);\n\t\t}\n\t};\n}\n\nlet WRAPPED_ENTRY: ExportedHandler | WorkerEntrypointConstructor | undefined;\nif (typeof ENTRY === \"object\") {\n\tWRAPPED_ENTRY = wrapExportedHandler(ENTRY);\n} else if (typeof ENTRY === \"function\") {\n\tWRAPPED_ENTRY = wrapWorkerEntrypoint(ENTRY);\n}\nexport default WRAPPED_ENTRY;\n"],
  "mappings": "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",
  "names": []
}
